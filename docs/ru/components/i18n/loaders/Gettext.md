# Gettext

Класс‑загрузчик переводов в формате GNU Gettext (`.po`). Наследует `TranslationLoaderAbstract` и реализует разбор файла при помощи регулярных выражений, формируя коллекцию переводов в виде `ArrayObject`.

## Методы

| Подпись                               | Возвращаемый тип | Доступ    | Назначение                                                                                                                                           |
| ------------------------------------- | ---------------- | --------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| `load(string $filename): ArrayObject` | `ArrayObject`    | public    | Загружает `.po`‑файл, проводит предварительную валидацию через `validateFile`, разбирает пары `msgid`/`msgstr` и возвращает их в виде `ArrayObject`. |
| `decode(string $str): string`         | `string`         | protected | Преобразует строку из формата Gettext: убирает кавычки, экранированные символы (`\n`, `\t` и т. д.). Используется внутри `load`.                     |

## Пример использования

```php
<?php

use Scaleum\i18n\Loaders\Gettext;

$loader = new Gettext(); // переменная lowerCamelCase

$messages = $loader->load(__DIR__ . '/messages/ru.po');

// Вывод перевода строки "greeting"
echo $messages['greeting']; // Привет
```

## Пример `.po`‑файла

```po
msgid "greeting"
msgstr "Привет"

msgid "farewell"
msgstr "До свидания"
```

## Советы по применению

* **Производительность**: если объём переводов велик, оборачивайте загрузчик кэшем (например, `PSR-16 Cache`) для избежания повторного чтения диска.
* **Валидность**: метод `validateFile` базового класса проверяет существование и доступность файла, но не его корректность. При необходимости расширяйте проверку, анализируя заголовки `.po`.
* **Локальное окружение**: убедитесь, что файлы `.po` сохраняются в UTF‑8 без BOM. Это предотвратит проблемы с кодировкой при разборе.
